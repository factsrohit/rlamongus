<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <title>Dashboard - GPS Tracker</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>

    <div class="container">
        <h1>Welcome to Real-Life Color Splash</h1>
        <p>Location Should Auto Update, If It Doesn't, Try:</p>

        <button class="neon" onclick="getLocation()">Refresh Current Location</button>
        
        <div class="info-box">
            <p id="location">📍 Your location will appear here...</p>
            <p id="loclastupdate">⏳ Location hasn't been updated in DB.</p>
            <p id="nearbyPlayers">🕵️‍♂️ NO players currently within your range.</p>
        </div>
        <div id="taskProgress" class="info-box">
            <h3>Task Progress</h3>
            <p id="totalTasks">Total Tasks: Loading...</p>
            <p id="completedTasks">Completed Tasks: Loading...</p>
            <p id="remainingTasks">Remaining Tasks: Loading...</p>
        </div>
        
        <p id="gameStatus">Loading game status...</p>
        <p id="playerRole">🕵️‍♂️ Role: Loading...</p>
        <div id="tasks" class ="info-box">
            <h3>Your Tasks</h3>
            <ul id="taskList"></ul>
        </div>

        <button class="kill" id="killBtn" style="display: none;" onclick="kill()">💀 Kill</button>
        <p id="cooldown"></p>

        <a href="/logout"><button class="neon" >🚪 Logout</button></a>

        <br><br>
    </div>
    <div id="admincontrols" class="container" style="display: none;">
        <h2>ADMIN CONTROLS</h2>
        <button class="neon" id="startGameBtn" onclick="startGame()">ReStart Game</button>
        <button class="alert" id="emergencystart"   onclick="startMeeting()">🚨 Start Emergency Meeting</button>
        <button class="alert" id="emergencyend" onclick="endMeeting()">✅ End Emergency Meeting</button>
        <button class="alert" id="convertCrewmatesBtn" onclick="convertCrewmates()">🔄 Convert Crewmates to Imposters</button>
        <button class="alert" id="clearusers"  onclick="clearUsers()">⚠️ Clear All Users (Except Admin)</button>
        <div class="info-box">
        <form id="add-task-form" >
            <input type="text" name="question" placeholder="Task Question" required />
            <input type="text" name="answer" placeholder="Correct Answer" required />
            <input type="text" name="hint" placeholder="Hint" />
            <button type="submit">Add Task</button>
        </form>
        </div>
        
    </div>
    <div id="emergencyOverlay" class="overlay">
    <h2>🚨 Emergency Meeting 🚨</h2>
    <p>All actions are disabled until the admin ends the meeting. Meet at the Server table.</p>

    <div id="votingSection">
        <h3>Vote to eject a player:</h3>
        <ul id="playerVoteList" style="list-style: none; padding: 0;"></ul>
        <button onclick="castVote(null)">Skip Vote</button>
    </div>
    </div>

    <div id="ejectionPopup" style="
        display: none;
        position: fixed;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        background: #111;
        color: #fff;
        padding: 20px 30px;
        border: 3px solid #f00;
        border-radius: 12px;
        z-index: 9999;
        font-size: 18px;
        text-align: center;
        box-shadow: 0 0 10px red;
        transition: opacity 0.3s ease;
        ">
        </div>
    <div id="winnerOverlay" class="overlay" style="display: none;">
        <h2 id="winnerMessage">🎉 Winner: </h2>
        <button class="neon" id="newgamebtn" onclick="startGame()" style="display: none;" >ReStart Game</button>
        <p>The game has ended. Please wait for the admin to restart the game.</p>
    </div>
    <div id="deadOverlay" class="overlay" style="display: none;">
        <h2>💀 You Are Dead 💀</h2>
        <p>You can no longer perform actions. Wait for the game to end.</p>
    </div>
    <script src="mainmenu.js"></script>

</body>
</html>
